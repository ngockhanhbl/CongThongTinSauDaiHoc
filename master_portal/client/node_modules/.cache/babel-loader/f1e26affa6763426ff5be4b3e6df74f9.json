{"remainingRequest":"C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\src\\components\\content\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\src\\components\\content\\Login.vue","mtime":1594480142466},{"path":"C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594480122516},{"path":"C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1594480121032},{"path":"C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594480122516},{"path":"C:\\Users\\TRUC XIU\\CongThongTinSauDaiHoc\\master_portal\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1594480141044}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\TRUC XIU\\\\CongThongTinSauDaiHoc\\\\master_portal\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\TRUC XIU\\\\CongThongTinSauDaiHoc\\\\master_portal\\\\client\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AuthenticationService from '@/services/AuthenticationService';\nimport AccountService from '@/services/AccountService';\nimport { mapGetters } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      API_KEYS: null,\n      API_CHECK: null,\n      email: '',\n      password: '',\n      password_again: ''\n    };\n  },\n  computed: _objectSpread({}, mapGetters([\"user\"]), {\n    login_username: {\n      get: function get() {\n        return this.$store.getters.login_username;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updateUsername\", payload);\n      }\n    },\n    login_password: {\n      get: function get() {\n        return this.$store.getters.login_password;\n      },\n      set: function set(payload) {\n        this.$store.dispatch(\"updatePassword\", payload);\n      }\n    }\n  }),\n  mounted: function mounted() {\n    localStorage.removeItem('vuex');\n  },\n  methods: {\n    checkAPIKEY: function () {\n      var _checkAPIKEY = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(this.API_KEYS + ' API_KEYS');\n                console.log(this.API_CHECK + 'API_CHECK');\n\n                if (this.API_KEYS != this.API_CHECK) {\n                  this.$toasted.show(\"M\\xE3 X\\xE1c Th\\u1EF1c Kh\\xF4ng \\u0110\\xFAng Vui l\\xF2ng ki\\u1EC3m tra l\\u1EA1i !\", {\n                    theme: \"bubble\",\n                    position: \"bottom-right\",\n                    duration: 5000\n                  });\n                } else {\n                  this.$root.$emit('bv::show::modal', 'modal-4', '#btnShow');\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkAPIKEY() {\n        return _checkAPIKEY.apply(this, arguments);\n      }\n\n      return checkAPIKEY;\n    }(),\n    changePassword: function () {\n      var _changePassword = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return AccountService.forgotPassword({\n                  api_key: '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',\n                  email: this.email,\n                  password: this.password\n                });\n\n              case 3:\n                response = _context2.sent;\n                this.$toasted.show(\"\\u0110\\u1ED7i M\\u1EADt Kh\\u1EA9u Th\\xE0nh c\\xF4ng !\", {\n                  theme: \"bubble\",\n                  position: \"bottom-center\",\n                  duration: 5000\n                });\n                this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow');\n                this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow');\n                this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow');\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.$toasted.show(\"\".concat(_context2.t0.response.data.error), {\n                  theme: \"outline\",\n                  position: \"bottom-center\",\n                  duration: 5000\n                });\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 10]]);\n      }));\n\n      function changePassword() {\n        return _changePassword.apply(this, arguments);\n      }\n\n      return changePassword;\n    }(),\n    checkForm: function () {\n      var _checkForm = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(e) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.validEmail(this.email)) {\n                  this.$toasted.show(\"Vui l\\xF2ng nh\\u1EADp \\u0111\\xFAng \\u0111\\u1ECBnh d\\u1EA1ng email !\", {\n                    theme: \"outline\",\n                    position: \"bottom-center\",\n                    duration: 5000\n                  });\n                } else {\n                  this.sendAuthentication();\n                  this.$root.$emit('bv::show::modal', 'modal-3', '#btnShow');\n                }\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function checkForm(_x) {\n        return _checkForm.apply(this, arguments);\n      }\n\n      return checkForm;\n    }(),\n    validEmail: function validEmail(email) {\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return re.test(email);\n    },\n    validPassword: function validPassword(email) {\n      var re = /^[a-zA-Z0-9]{8,32}$/;\n      return re.test(email);\n    },\n    resetModal_2: function resetModal_2() {\n      this.API_KEYS = null, this.API_CHECK = null, this.email = '', this.password = '', this.password_again = '', this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow');\n    },\n    resetModal_3: function resetModal_3() {\n      this.API_KEYS = null, this.API_CHECK = null, this.email = '', this.password = '', this.password_again = ''.this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow');\n    },\n    resetModal_4: function resetModal_4() {\n      this.API_KEYS = null, this.API_CHECK = null, this.email = '', this.password = '', this.password_again = '', this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow');\n    },\n    IntegerGenerator: function IntegerGenerator() {\n      return Math.floor(Math.random() * 10001);\n    },\n    sendAuthentication: function () {\n      var _sendAuthentication = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.API_KEYS = this.IntegerGenerator();\n                console.log('this.API_KEYS ' + this.API_KEYS);\n                _context4.prev = 2;\n                _context4.next = 5;\n                return AuthenticationService.AuthenticationEmail({\n                  API_KEYS: this.API_KEYS,\n                  email: this.email\n                });\n\n              case 5:\n                response = _context4.sent;\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](2);\n                this.$toasted.show(\"\".concat(_context4.t0.response.data.error), {\n                  theme: \"outline\",\n                  position: \"bottom-center\",\n                  duration: 5000\n                });\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[2, 8]]);\n      }));\n\n      function sendAuthentication() {\n        return _sendAuthentication.apply(this, arguments);\n      }\n\n      return sendAuthentication;\n    }(),\n    checkPassword: function checkPassword() {\n      if (this.password !== this.password_again) {\n        this.$toasted.show(\"Password v\\xE0 Password x\\xE1c nh\\u1EADn kh\\xF4ng gi\\u1ED1ng nhau, Vui l\\xF2ng ki\\u1EC3m tra l\\u1EA1i !\", {\n          theme: \"outline\",\n          position: \"bottom-center\",\n          duration: 5000\n        });\n        this.password = '';\n        this.password_again = '';\n      } else if (!this.validPassword(this.password)) {\n        this.$toasted.show(\"M\\u1EADt kh\\u1EA9u \\u0111\\u01B0\\u1EE3c cung c\\u1EA5p ph\\u1EA3i kh\\u1EDBp v\\u1EDBi c\\xE1c quy t\\u1EAFc sau:\\n              <br>\\n              1. N\\xF3 ph\\u1EA3i ch\\u1EE9a ch\\u1EC9 c\\xE1c k\\xFD t\\u1EF1 sau: ch\\u1EEF th\\u01B0\\u1EDDng, ch\\u1EEF hoa, ch\\u1EEF s\\u1ED1.\\n              <br>\\n              2. m\\u1EADt kh\\u1EA9u d\\xE0i \\xEDt nh\\u1EA5t 8 k\\xED t\\u1EF1 v\\xE0 kh\\xF4ng d\\xE0i h\\u01A1n 32 k\\xED t\\u1EF1.\\n              \", {\n          theme: \"outline\",\n          position: \"bottom-center\",\n          duration: 5000\n        });\n      } else {\n        this.changePassword();\n      }\n    },\n    submitLogin: function () {\n      var _submitLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return AuthenticationService.login({\n                  email: this.login_username,\n                  password: this.login_password\n                });\n\n              case 3:\n                response = _context5.sent;\n                this.$store.dispatch('setToken', response.data.token);\n                this.$store.dispatch('setUser', response.data.user);\n                this.$store.dispatch('resetlogin');\n                window.scrollTo(0, 100); //trick fix slow react\n\n                console.log(response);\n\n                if (response.data.user.isUpdateInformation == 0) {\n                  this.$router.push({\n                    name: 'UpdateInformationRegister' // params: {id:this.user.id}\n\n                  });\n                } else if (response.data.user.roles == 1) {\n                  this.$router.push({\n                    name: 'patient',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                } else if (response.data.user.roles == 2) {\n                  this.$router.push({\n                    name: 'hospital',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                } else if (response.data.user.roles == 3) {\n                  this.$router.push({\n                    name: 'doctor',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                } else if (response.data.user.roles == 0) {\n                  this.$router.push({\n                    name: 'admin',\n                    params: {\n                      id: this.user.id\n                    }\n                  });\n                }\n\n                _context5.next = 15;\n                break;\n\n              case 12:\n                _context5.prev = 12;\n                _context5.t0 = _context5[\"catch\"](0);\n                this.$toasted.show(\"\".concat(_context5.t0.response.data.error), {\n                  theme: \"bubble\",\n                  position: \"bottom-right\",\n                  duration: 2000\n                });\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 12]]);\n      }));\n\n      function submitLogin() {\n        return _submitLogin.apply(this, arguments);\n      }\n\n      return submitLogin;\n    }()\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div class=\"bg\">\r\n<form>\r\n     <b-row class=\"login shadow p-3 mb-5 bg-white rounded \">\r\n      <b-col\r\n        cols=\"12\"\r\n        class=\"label-login d-flex justify-content-center text-red\"\r\n      >\r\n        <h2>Đăng Nhập</h2>\r\n      </b-col>\r\n\r\n      <b-col cols=\"12\">\r\n        <b-row class=\"lg-control\">\r\n          <b-col class=\"d-flex inputCus\"\r\n            ><input type=\"text\" placeholder=\"Nhập Tài Khoản\" v-model=\"login_username\" />\r\n          </b-col>\r\n          <span class=\"d-flex align-items-center\"><img src=\"@/assets/images/man-user.svg\" /></span>\r\n        </b-row>\r\n      </b-col>\r\n\r\n      <div class=\"spacer-5\"></div>\r\n\r\n      <b-col cols=\"12\">\r\n        <b-row class=\"lg-control\">\r\n          <b-col class=\"d-flex inputCus\"\r\n            ><input type=\"password\" placeholder=\"Nhập Mật Khẩu\" v-model=\"login_password\"\r\n          /></b-col>\r\n           <span class=\"d-flex align-items-center\"><img src=\"@/assets/images/locked.svg\" /></span>\r\n        </b-row>\r\n      </b-col>\r\n      <div class=\"spacer-5\"></div>\r\n      <b-col cols=\"12\">\r\n        <b-row class=\"justify-content-around\">\r\n          <b-button variant=\"outline-primary\" @click=\"submitLogin\">Đăng Nhập</b-button>\r\n        </b-row>\r\n      </b-col>\r\n\r\n      <b-col cols=\"12\">\r\n        <b-row class=\"d-flex justify-content-center\">\r\n        <p class=\"text-request\" v-b-modal.modal-1>\r\n            </p>\r\n          <b-modal id=\"modal-1\" title=\"ĐĂNG KÍ\" class=\"text-center\"  ok-only>\r\n              <router-link to=\"/registerpatient\"><p class=\"my-4\">Đăng Kí Dành Cho Bệnh Nhân</p></router-link>\r\n              <router-link to=\"/registerhospital\"><p class=\"my-4\">Đăng Kí Dành Cho Bệnh Viện</p></router-link>\r\n          </b-modal>\r\n        </b-row>\r\n      </b-col>\r\n      <b-col cols=\"12\">\r\n        <b-row class=\"d-flex justify-content-center\">\r\n        <p class=\"text-request\" v-b-modal.modal-2>\r\n            </p>\r\n          <b-modal id=\"modal-2\" title=\"Quên mật khẩu\" class=\"d-flex\">\r\n            <span class=\"title\"> Nhập Email </span>\r\n            <input  type=\"text\" class=\"w-100 p-1\" v-model=\"email\">\r\n              <template v-slot:modal-footer>\r\n                  <div class=\"w-100\">\r\n                  <b-button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      class=\"float-right text-white\"\r\n                      @click=\"resetModal_2\"\r\n                  >\r\n                      Đóng\r\n                  </b-button>\r\n                  <b-button\r\n                      @click=\"checkForm\"\r\n                      variant=\"warning\"\r\n                      size=\"sm\"\r\n                      class=\"float-right mr-3 SendReqCreateJob text-white\"\r\n                  >\r\n                      Gửi Yêu Cầu Đổi Mật Khẩu\r\n                  </b-button>\r\n                  </div>\r\n              </template>\r\n          </b-modal>\r\n          <b-modal id=\"modal-3\" title=\"Xác Thực\" class=\"d-flex\">\r\n            <span class=\"title\"> Nhập Mã Xác Thực Nhận Được  </span>\r\n            <input  type=\"text\" class=\"w-100 p-1\" v-model=\"API_CHECK\">\r\n              <template v-slot:modal-footer>\r\n                  <div class=\"w-100\">\r\n                  <b-button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      class=\"float-right text-white\"\r\n                      @click=\"resetModal_3\"\r\n                  >\r\n                      Đóng\r\n                  </b-button>\r\n                  <b-button\r\n                      @click=\"checkAPIKEY\"\r\n                      variant=\"warning\"\r\n                      size=\"sm\"\r\n                      class=\"float-right mr-3 SendReqCreateJob text-white\"\r\n                  >\r\n                      Gửi Xác Thực\r\n                  </b-button>\r\n                  </div>\r\n              </template>\r\n          </b-modal>\r\n          <b-modal id=\"modal-4\" title=\"Đổi Mật Khẩu\" class=\"d-flex\">\r\n            <div class=\"py-2\">\r\n              <span class=\"title\"> Nhập Mật khẩu Mới  </span>\r\n              <input  type=\"password\" class=\"w-100 p-1\" v-model=\"password\">\r\n            </div>\r\n            <div class=\"py-2\">\r\n                <span class=\"title\"> Nhập Lại Mật khẩu Mới  </span>\r\n                <input type=\"password\" class=\"w-100 p-1\" v-model=\"password_again\">\r\n            </div>\r\n              <template v-slot:modal-footer>\r\n                  <div class=\"w-100\">\r\n                  <b-button\r\n                      variant=\"secondary\"\r\n                      size=\"sm\"\r\n                      class=\"float-right text-white\"\r\n                      @click=\"resetModal_4\"\r\n                  >\r\n                      Đóng\r\n                  </b-button>\r\n                  <b-button\r\n                      @click=\"checkPassword\"\r\n                      variant=\"success\"\r\n                      size=\"sm\"\r\n                      class=\"float-right mr-3 SendReqCreateJob text-white\"\r\n                  >\r\n                      Gửi Xác Thực\r\n                  </b-button>\r\n                  </div>\r\n              </template>\r\n          </b-modal>\r\n        </b-row>\r\n      </b-col>\r\n    </b-row>\r\n</form>\r\n</div>\r\n</template>\r\n<script>\r\nimport AuthenticationService from '@/services/AuthenticationService';\r\nimport AccountService from '@/services/AccountService';\r\nimport { mapGetters} from \"vuex\";\r\nexport default {\r\n  data(){\r\n    return{\r\n          API_KEYS:null,\r\n          API_CHECK:null,\r\n          email:'',\r\n          password:'',\r\n          password_again:''\r\n    }\r\n  },\r\n  computed: {\r\n        ...mapGetters([\"user\"]),\r\n        login_username: {\r\n           get(){ \r\n               return this.$store.getters.login_username\r\n            },\r\n           set(payload){  \r\n               this.$store.dispatch(\"updateUsername\",payload)\r\n           }\r\n        },\r\n        login_password: {\r\n           get(){ \r\n               return this.$store.getters.login_password\r\n            },\r\n           set(payload){  \r\n               this.$store.dispatch(\"updatePassword\",payload)\r\n           }\r\n        },\r\n  },\r\n  mounted() {\r\n    localStorage.removeItem('vuex');\r\n  },\r\n  methods:{\r\n        async checkAPIKEY(){\r\n            console.log(this.API_KEYS+' API_KEYS')\r\n            console.log(this.API_CHECK+ 'API_CHECK')\r\n            if(this.API_KEYS != this.API_CHECK){\r\n                this.$toasted.show(`Mã Xác Thực Không Đúng Vui lòng kiểm tra lại !`, { \r\n                    theme: \"bubble\", \r\n                    position: \"bottom-right\", \r\n                    duration : 5000\r\n                });\r\n            }else{\r\n                this.$root.$emit('bv::show::modal', 'modal-4', '#btnShow')\r\n            }\r\n        },\r\n        async changePassword(){\r\n            try {\r\n              const response = await AccountService.forgotPassword({\r\n                  api_key:'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',\r\n                  email:this.email,\r\n                  password:this.password\r\n              })\r\n              this.$toasted.show(`Đỗi Mật Khẩu Thành công !`, { \r\n                  theme: \"bubble\", \r\n                  position: \"bottom-center\", \r\n                  duration : 5000\r\n              });\r\n              this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow')\r\n              this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow')\r\n              this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow')\r\n\r\n          }catch (error) {\r\n              this.$toasted.show(`${error.response.data.error}`, { \r\n                  theme: \"outline\", \r\n                  position: \"bottom-center\", \r\n                  duration : 5000\r\n              });\r\n          }\r\n        },\r\n        checkForm:async function (e) {\r\n            if(!this.validEmail(this.email)) {\r\n                    this.$toasted.show(`Vui lòng nhập đúng định dạng email !`, { \r\n                    theme: \"outline\", \r\n                    position: \"bottom-center\", \r\n                    duration : 5000\r\n                });\r\n            }\r\n            else{\r\n                this.sendAuthentication();\r\n                this.$root.$emit('bv::show::modal', 'modal-3', '#btnShow')\r\n            }\r\n        },\r\n    validEmail: function (email) {\r\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(email)\r\n    },\r\n    validPassword: function (email) {\r\n        var re = /^[a-zA-Z0-9]{8,32}$/;\r\n        return re.test(email)\r\n    },\r\n    resetModal_2(){\r\n          this.API_KEYS = null,\r\n          this.API_CHECK = null,\r\n          this.email= '',\r\n          this.password='',\r\n          this.password_again='',\r\n          this.$root.$emit('bv::hide::modal', 'modal-2', '#btnShow')\r\n    },\r\n    resetModal_3(){\r\n          this.API_KEYS = null,\r\n          this.API_CHECK = null,\r\n          this.email= '',\r\n          this.password= '',\r\n          this.password_again=''.\r\n          this.$root.$emit('bv::hide::modal', 'modal-3', '#btnShow')\r\n    },\r\n    resetModal_4(){\r\n          this.API_KEYS = null,\r\n          this.API_CHECK = null,\r\n          this.email= '',\r\n          this.password= '',\r\n          this.password_again='',\r\n          this.$root.$emit('bv::hide::modal', 'modal-4', '#btnShow')\r\n    },\r\n    IntegerGenerator(){\r\n        return Math.floor(Math.random() * 10001);\r\n    },\r\n    async sendAuthentication(){\r\n        this.API_KEYS = this.IntegerGenerator();\r\n        console.log('this.API_KEYS '+this.API_KEYS)\r\n        try {\r\n            const response = await AuthenticationService.AuthenticationEmail({\r\n                API_KEYS:this.API_KEYS,\r\n                email:this.email\r\n            })\r\n        }catch (error) {\r\n            this.$toasted.show(`${error.response.data.error}`, { \r\n                theme: \"outline\", \r\n                position: \"bottom-center\", \r\n                duration : 5000\r\n            });\r\n        }\r\n    },\r\n    checkPassword(){\r\n      if(this.password !== this.password_again){\r\n          this.$toasted.show(`Password và Password xác nhận không giống nhau, Vui lòng kiểm tra lại !`, { \r\n              theme: \"outline\", \r\n              position: \"bottom-center\", \r\n              duration : 5000\r\n          });\r\n          this.password = '';\r\n          this.password_again = '';\r\n      }else if(!this.validPassword(this.password)){\r\n          this.$toasted.show(`Mật khẩu được cung cấp phải khớp với các quy tắc sau:\r\n              <br>\r\n              1. Nó phải chứa chỉ các ký tự sau: chữ thường, chữ hoa, chữ số.\r\n              <br>\r\n              2. mật khẩu dài ít nhất 8 kí tự và không dài hơn 32 kí tự.\r\n              `, {\r\n              theme: \"outline\", \r\n              position: \"bottom-center\", \r\n              duration : 5000\r\n          });\r\n      }\r\n      else{\r\n          this.changePassword();\r\n      }\r\n    },\r\n    async submitLogin(){\r\n            try {\r\n                const response = await AuthenticationService.login({\r\n                  email: this.login_username,\r\n                  password: this.login_password\r\n                })\r\n                  this.$store.dispatch('setToken', response.data.token)\r\n                  this.$store.dispatch('setUser', response.data.user)\r\n                  this.$store.dispatch('resetlogin')\r\n                  window.scrollTo(0,100)   //trick fix slow react\r\n              console.log(response)\r\n              if(response.data.user.isUpdateInformation == 0 ){\r\n                this.$router.push({\r\n                  name:'UpdateInformationRegister',\r\n                  // params: {id:this.user.id}\r\n                })\r\n               }\r\n               else if(response.data.user.roles == 1){\r\n                this.$router.push({\r\n                  name:'patient',\r\n                  params: {id:this.user.id}\r\n                })\r\n               }\r\n              else if(response.data.user.roles == 2){\r\n                this.$router.push({\r\n                  name:'hospital',\r\n                  params: {id:this.user.id}\r\n                })\r\n               }\r\n              else if(response.data.user.roles == 3){\r\n                this.$router.push({\r\n                  name:'doctor',\r\n                  params: {id:this.user.id}\r\n                })\r\n               }\r\n\r\n              else if(response.data.user.roles == 0){\r\n                this.$router.push({\r\n                  name:'admin',\r\n                  params: {id:this.user.id}\r\n                })\r\n               }\r\n\r\n            }         \r\n            catch (error) {\r\n              this.$toasted.show(`${error.response.data.error}`, { \r\n                theme: \"bubble\", \r\n                position: \"bottom-right\", \r\n                duration : 2000\r\n              });\r\n              \r\n              }\r\n        },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* dùng emit gửi cho app.vue để set-backgouround */\r\n.bg {\r\n  font-family: Arial, Helvetica, sans-serif;\r\n  margin-top: 15vh;\r\n  margin-bottom: 10vh;\r\n  font-size: 14px;\r\n\r\n}\r\n.login {\r\n  border: 1px solid #bdc3c7;\r\n  border-radius: 15px;\r\n  width: 50vh;\r\n  height: 75vh;\r\n  background: #000;\r\n  margin: auto;\r\n}\r\n.label-login {\r\n  padding: 1rem 0;\r\n}\r\n\r\n.spacer-10 {\r\n  width: 100%;\r\n  height: 10px;\r\n}\r\n\r\n.label-login {\r\n  margin-top: 5vh;\r\n}\r\n\r\n.lg-control input{\r\n  border: 1px solid #bdc3c7;\r\n  padding: 1ex;\r\n  position: relative;\r\n  padding-left: 30px;\r\n  border-radius: 5px;\r\n  width: 80vmin;\r\n}\r\n\r\n.lg-control img {\r\n  height: 1.2em;\r\n  width: 1.2em;\r\n  position: absolute;\r\n  left: 25px;\r\n}\r\n.inputCus {\r\n  position: relative;\r\n}\r\n.border-top-custom {\r\n  border-top: 1px solid #cdc9c9;\r\n}\r\n\r\n.seperate {\r\n  padding: 0 15px;\r\n  color: #cdc9c9;\r\n}\r\n.text-request {\r\n  color: #2c3e50;\r\n}\r\n\r\n.text-red {\r\n  color: red;\r\n}\r\n\r\n.text-request:hover {\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n} \r\n.title{\r\n  font-size: 1.2rem;\r\n  color:#2c3e50;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/content"}]}